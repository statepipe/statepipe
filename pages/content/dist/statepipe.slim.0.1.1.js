!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=18)}([function(e,t,n){"use strict";(function(e){var n,r;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="out",o="pipe",u="trigger",i="[\\".concat(":trigger","],[\\").concat(":pipe","],[\\").concat(":out","]"),l="[\\".concat(":statepipe","]"),c=[":out",":pipe",":trigger"],d=(_defineProperty(n={},":pipe",o),_defineProperty(n,":out",a),_defineProperty(n,":trigger",u),n),f=(_defineProperty(r={},o,":pipe"),_defineProperty(r,a,":out"),_defineProperty(r,u,":trigger"),r),p=function validateProp(e){return!!("string"==typeof e&&e.trim().length>0)},s=function validateState(e){return!(!e||"object"!==_typeof(e)||!1!==Array.isArray(e))},_=function validateNode(e){return!!(s(e)&&e.parentNode&&e.nodeName&&"function"==typeof e.addEventListener&&"function"==typeof e.setAttribute)},v=function flatten(e,t){return Array.isArray(e)&&Array.isArray(t)&&(e=e.concat(t)),e},y=function testSchema(e){return _(e)?c.map((function(t){if(p(e.getAttribute(t)))return{type:d[t],node:e}})).filter((function(e){return e})):null},g={log:function log(){if(e.$statepipeLog){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=console.log).call.apply(t,[console.log].concat(r))}},warn:function warn(){if(e.$statepipeLog){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=console.warn).call.apply(t,[console.warn].concat(r))}},error:function error(){if(e.$statepipeLog){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=console.error).call.apply(t,[console.error].concat(r))}},flatten:v,parseJSON:function parseJSON(e,t){if(t=t||":state",_(e)&&p(t))try{var n=JSON.parse(e.getAttribute(t));return s(n)?n:null}catch(e){return null}return null},validateProp:p,validateState:s,validateNode:_,validateStoreAttrName:function validateStoreAttrName(e){return!(-1===[u,a,o].indexOf(e))},getStatepipeName:function getStatepipeName(e){if(_(e)){var t=e.getAttribute(":statepipe");return t&&t.length?t:null}return null},getStoreRunner:function getStoreRunner(e){return function(t){return s(t)&&s(t.store)&&p(e)&&p(t.fn)&&s(t.store[e])&&"function"==typeof t.store[e][t.fn]?(t.run=t.store[e][t.fn],t):null}},queryComponents:function queryComponents(e,t){if(_(e)){var n=Array.from(e.querySelectorAll(i));return[e].concat(n).map(y).filter((function(e){return e})).reduce(v,[]).filter((function(e){return!e.wrapper})).filter((function(e){return e.node.statepipe?null:e})).map((function(e){return e.node.statepipe=t,e.wrapper=t,e}))}return null},QUERY_STATEPIPE:l,ALIAS_STORES:d,ALIAS_ATTR:f,OUT_ATTR:":out",OUT_STORE:a,PIPE_ATTR:":pipe",PIPE_STORE:o,TRIGGER_ATTR:":trigger",TRIGGER_STORE:u,STATE_ATTR:":state",STATEPIPE_ATTR:":statepipe",COMPONENT_ATTR_LIST:c,PAYLOAD_ATTR:":payload",ACTION_ATTR:":action"};t.default=g}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_interopRequireDefault(n(0)),a=_interopRequireDefault(n(6)),o=_interopRequireDefault(n(7)),u=_interopRequireDefault(n(9));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var i={},l=function getComponents(e,t,n){return r.default.queryComponents(e,t).filter((function(e){return e})).map((0,a.default)(n)).map(o.default).filter((function(e){return e}))},c=function statepipe(e,t){if("function"!=typeof MutationObserver)return r.default.warn(":statepipe MutationObserver not available"),null;if(!r.default.validateState(t)||!r.default.validateNode(e))return r.default.warn(":statepipe invalid store/wrapper"),null;var n=Array.from(e.querySelectorAll(r.default.QUERY_STATEPIPE)||[]);return(n=n.reverse()).push(e),n.forEach(function scan(e){return function(t){var n=r.default.getStatepipeName(t);if(!n)return null;if(void 0!==i[n])return r.default.warn(':statepipe "'.concat(n,'" already taken.')),null;var a=l(t,n,e);if(!a.length)return null;var o={name:n,wrapper:t,stores:e,components:a,addComponents:function addComponents(t){return l(t,n,e)}};o.observer=new MutationObserver((0,u.default)(o)).observe(t,{attributes:!0,childList:!0,subtree:!0,attributeFilter:[r.default.ACTION_ATTR,r.default.STATE_ATTR]}),i[n]=o}}(t)),i};t.default=c},,function(e,t,n){"use strict";(function(t){var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));t.$statepipeLog=1==new Boolean(t.$statepipeLog||!1),t.$statepipeAutoStart=1==new Boolean(t.$statepipeAutoStart||!0),t.$statepipeStores=t.$statepipeStores||{},t.$statepipeAutoStart&&(0,r.default)(document.body,t.$statepipeStores),e.exports=t.$statepipe=r.default}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));var a=function getReducers(e,t){return function(n,a){var o,u,i=n.trim().split("|").map((function(e){return e.trim()})).filter((function(e){return e.length}));return i.length<1?null:(e===r.default.TRIGGER_STORE&&(o=i[0].match(/^(.*)@(.*)$/))&&o.length>1&&r.default.validateProp(o[1])&&(u=o[2].trim(),o=o[1].trim()),i.map((function(n){var i=n.split(":"),l=i.splice(0,1)[0];if(r.default.validateProp(l)){var c={index:a,store:t,slug:n,fn:l,args:i.filter((function(e){return e.trim().length}))};return e===r.default.TRIGGER_STORE&&r.default.validateProp(o)&&(c.action=o,c.event=u.split(".").pop()),c}return null})).filter((function(e){return!!e})).filter((function(t){return e===r.default.TRIGGER_STORE?t.action?t:null:t})))}};t.default=function _default(t){return r.default.validateState(t)?function(n){if(!r.default.validateState(n))return null;if(!r.default.validateStoreAttrName(n.type))return null;if(!r.default.validateNode(n.node))return null;var o=(n.node.getAttribute(r.default.ALIAS_ATTR[n.type])||"").replace(/\s|\r|\r\n|\n|\s/gim,"").trim().split(","),u=Object.assign(n,{reducers:o.map(a(n.type,t)).filter((function(e){return!!e})).reduce(r.default.flatten,[]).filter((function(e){return e}))});return e.$statepipeLog&&u.reducers.forEach((function(e){r.default.log(":statepipe ".concat(n.node.statepipe,": ").concat(n.type,"/ ").concat(n.node.nodeName," ⋆ ").concat(e.fn," args:").concat(e.args.join(",")))})),u}:null}}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_interopRequireDefault(n(0)),a=_interopRequireDefault(n(8));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=function _default(e){return r.default.validateState(e)&&e.type===r.default.TRIGGER_STORE&&r.default.validateNode(e.node)&&(e.reducers=e.reducers.map((function(t){var n=t.fn.split("@"),o=n[0],u=n[1];if(r.default.validateProp(o)&&r.default.validateProp(u)){var i=u.match(/^(documentElement|document|body|window)(\.)(.+)/);if(i&&4===i.length&&r.default.validateProp(i[1])&&r.default.validateProp(i[3])){var l;switch(u=i[3],i[1]){case"document":l=document;break;case"documentElement":l=document.documentElement;break;case"body":l=document.body;break;case"window":l=window}l&&"function"==typeof l.addEventListener&&(r.default.log(":statepipe ".concat(e.wrapper,": ").concat(e.type,"/ ").concat(e.node.nodeName," (").concat(t.index,") bind ").concat(i[1],' "').concat(u,'" to action: ').concat(o)),l.addEventListener(u,(0,a.default)(e,o)))}else r.default.log(":statepipe ".concat(e.wrapper,": ").concat(e.type,"/ ").concat(e.node.nodeName," (").concat(t.index,') bind "').concat(u,'" to action: ').concat(o)),e.node.addEventListener(u,(0,a.default)(e,o));return null}return t})).filter((function(e){return e}))),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default=function _default(e,t){return r.default.validateState(e)&&r.default.validateNode(e.node)&&r.default.validateProp(t)?function(n){e.reducers=e.reducers.filter(r.default.getStoreRunner(e.type));var a=r.default.parseJSON(e.node);if(!r.default.validateState(a))return e;var o,u=function resolveTrigger(n,a){r.default.validateState(a)&&Object.keys(a).length?(r.default.log(":statepipe ".concat(e.wrapper,": ").concat(e.type,"/ ").concat(e.node.nodeName," (").concat(n,") ∴ action=").concat(t," payload"),a),e.node.setAttribute(r.default.PAYLOAD_ATTR,JSON.stringify(a)),e.node.setAttribute(r.default.ACTION_ATTR,t)):r.default.log(":statepipe ".concat(e.wrapper,": ").concat(e.type,"/ ").concat(e.node.nodeName," (").concat(n,") ∴ action ").concat(t," wont be fired!"))},i=e.reducers.filter((function(e){return r.default.validateProp(t)&&t===e.action})).filter((function(e){return e.event===(n||{}).type&&void 0!==e.event})).reduce((function(t,i){return o!==i.index&&(void 0!==o&&u(o,t),o=i.index,t=a),function getPayload(e,t){return function(n,a){if(r.default.validateState(n)&&r.default.validateState(a)&&"function"==typeof a.run){var o=":statepipe ".concat(e.wrapper,": ").concat(e.type,"/ ").concat(e.node.nodeName);try{var u=a.run.apply(null,a.args);"function"==typeof u?(n=u(n,t,e.node),r.default.log("".concat(o," (").concat(a.index,") > ").concat(a.fn,"(").concat((a.args||[]).join(","),") partial payload:"),n)):r.default.log("".concat(o," (").concat(a.index,") > ").concat(a.fn,"(").concat((a.args||[]).join(","),") reducer is not a function!"),n)}catch(e){r.default.warn("".concat(o," ").concat(a.fn,"(").concat(a.args.join(","),") error:"),e),n=null}}return n}}(e,n)(t,i)}),a);if(e.reducers.length){var l=e.reducers[e.reducers.length-1].index;u(l,i)}return e}:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_interopRequireDefault(n(0)),a=_interopRequireDefault(n(10)),o=_interopRequireDefault(n(11)),u=_interopRequireDefault(n(12)),i=_interopRequireDefault(n(3));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var l=function handleMutation(e){return!r.default.validateState(e)||e&&e.components&&0===e.components.length||!r.default.validateState((e||{}).wrapper)?null:function(t){return Array.from(t=t||[]).forEach((function(t){if(t.removedNodes.length){var n=Array.from(t.removedNodes).filter(r.default.validateNode);(0,a.default)(e,n)}if(t.addedNodes.length){var l=Array.from(t.addedNodes).filter(r.default.validateNode).filter((function(t){return r.default.validateProp(t.getAttribute(r.default.STATEPIPE_ATTR))?((0,i.default)(t,e.stores),null):t})).filter(function myContext(e){return function(t){return Array.from(e.wrapper.querySelectorAll(r.default.QUERY_STATEPIPE)||[]).reduce((function(e,n){return!0===e&&n.contains(t)&&(e=!1),e}),!0)?t:null}}(e)).map(e.addComponents).reduce(r.default.flatten,[]).filter((function(e){return!!e}));l.length&&(e.components=e.components.concat(l))}var c=!!(t.attributeName||"").match(r.default.ACTION_ATTR),d=!!(t.attributeName||"").match(r.default.STATE_ATTR);if((c||d)&&r.default.validateProp(t.target.statepipe)){var f=c?t.target.getAttribute(r.default.ACTION_ATTR):null,p=c?r.default.parseJSON(t.target,r.default.PAYLOAD_ATTR):null;c&&r.default.validateState(p)&&r.default.validateProp(f)?e.components.filter((function(e){return e.type===r.default.PIPE_STORE})).forEach((0,o.default)(f,p,t.target)):d&&e.components.filter((function(e){return e.type===r.default.OUT_STORE&&e.node===t.target&&r.default.validateNode(e.node)})).forEach(u.default)}}))}};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default=function _default(e,t){return(t||[]).forEach((function(t){return(e=e||{}).components=(e.components||[]).filter((function(e){return e&&e.node===t?(r.default.log(":statepipe ".concat(e.wrapper,": ").concat(e.node.nodeName,":").concat(e.type," removed from page.")),null):e})),e.wrapper===t&&(e.components=[],e.observer&&"function"==typeof e.observer.disconnect&&e.observer.disconnect(),delete e.stores,delete e.add,delete e.components,delete e.observer,delete e.wrapper,delete e.addCompoents,e.ejected=!0,r.default.log(":statepipe ".concat(e.name,": ejected!"))),e}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default=function _default(e,t,n){return r.default.validateState(t)&&r.default.validateNode(n)&&r.default.validateProp((n||{}).statepipe)&&r.default.validateProp(e)?function(a){if(!r.default.validateState(a)||!r.default.validateNode(a.node)||!r.default.PIPE_STORE===a.type)return null;var o,u,i=":statepipe ".concat(a.node.statepipe,": ").concat(a.type,"/ ").concat(a.node.nodeName),l=r.default.parseJSON(a.node),c=function resolveAction(e,t){if(r.default.validateState(t)){var n=JSON.stringify(t),o=JSON.stringify(l);r.default.validateProp(n)&&r.default.validateProp(o)&&n!==o?(a.node.setAttribute(r.default.STATE_ATTR,n),r.default.log("".concat(i," (").concat(e,") ∴ state"),n)):r.default.log("".concat(i," (").concat(e,") ∴ no state changes!"))}else r.default.log("".concat(i," (").concat(e,") ∴ no state changes!"))};if(!r.default.validateState(l))return null;try{if(a.reducers=a.reducers.filter(r.default.getStoreRunner(a.type)),o=a.reducers.reduce((function(o,d){if(u!==d.index&&(void 0!==u&&c(u,o),u=d.index,o=l),r.default.validateState(o)){var f=d.run.apply(d,d.args);"function"==typeof f?(o=f(t,o,e,a.node,n),r.default.log("".concat(i," (").concat(d.index,") > ").concat(d.fn,"(").concat((d.args||[]).join(","),") payload"),t,"state",o,"action: "+e)):r.default.log("".concat(i," (").concat(d.index,") > ").concat(d.fn,"(").concat((d.args||[]).join(","),") reducer is not a function!"),o)}return o}),l),a.reducers.length){var d=a.reducers[a.reducers.length-1].index;c(d,o)}}catch(e){r.default.warn("".concat(i," > error running reducers!"),e)}return a}:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default=function _default(e){if(!r.default.validateState(e)||!Array.isArray(e.reducers))return null;var t=":statepipe ".concat(e.node.statepipe,": ").concat(r.default.OUT_STORE,"/").concat(e.node.nodeName),n=r.default.parseJSON(e.node);if(!r.default.validateState(n))return null;try{var a;e.reducers=e.reducers.filter(r.default.getStoreRunner(e.type)),e.reducers.reduce((function(o,u){if(void 0!==a&&a===u.index||(a=u.index,o=n),o&&r.default.validateState(o)){var i=u.run.apply(u,u.args);"function"==typeof i?(o=i(o,e.node),r.default.log("".concat(t," (").concat(u.index,") ∴ ").concat(u.fn,"(").concat((u.args||[]).join(","),") state:"),o)):r.default.log("".concat(t," (").concat(u.index,") > ").concat(u.fn,"(").concat((u.args||[]).join(","),") reducer is not a function!"),o)}return o}),n)}catch(e){r.default.warn("".concat(t," error"),e)}}},,,,,,function(e,t,n){e.exports=n(5)}]);